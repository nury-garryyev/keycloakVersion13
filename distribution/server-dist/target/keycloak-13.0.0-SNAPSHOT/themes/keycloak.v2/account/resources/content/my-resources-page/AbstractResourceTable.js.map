{"version":3,"sources":["../../../src/app/content/my-resources-page/AbstractResourceTable.tsx"],"names":["React","Msg","AbstractResourcesTable","Component","hasPermissions","row","state","permissions","has","get","length","firstUser","username","numOthers","sharedWithUsersMessage","getClientName","client","hasOwnProperty","name","localize","clientId"],"mappings":"AAAA,OAAO,KAAKA,KAAZ;AAEA,SAASC,GAAT;AAUA,OAAO,MAAeC,sBAAf,SAA6EF,KAAK,CAACG,SAAnF,CAAqH;AAEhHC,EAAAA,cAAV,CAAyBC,GAAzB,EAA+C;AAC7C,WAAQ,KAAKC,KAAL,CAAWC,WAAX,CAAuBC,GAAvB,CAA2BH,GAA3B,CAAD,IAAsC,KAAKC,KAAL,CAAWC,WAAX,CAAuBE,GAAvB,CAA2BJ,GAA3B,EAAiCK,MAAjC,GAA0C,CAAvF;AACD;;AAEOC,EAAAA,SAAR,CAAkBN,GAAlB,EAAuC;AACrC,QAAI,CAAC,KAAKD,cAAL,CAAoBC,GAApB,CAAL,EAA+B,OAAO,WAAP,CADM,CACc;;AAEnD,WAAO,KAAKC,KAAL,CAAWC,WAAX,CAAuBE,GAAvB,CAA2BJ,GAA3B,EAAiC,CAAjC,EAAoCO,QAA3C;AACD;;AAESC,EAAAA,SAAV,CAAoBR,GAApB,EAAyC;AACvC,QAAI,CAAC,KAAKD,cAAL,CAAoBC,GAApB,CAAL,EAA+B,OAAO,CAAC,CAAR,CADQ,CACG;;AAE1C,WAAO,KAAKC,KAAL,CAAWC,WAAX,CAAuBE,GAAvB,CAA2BJ,GAA3B,EAAiCK,MAAjC,GAA0C,CAAjD;AACD;;AAEMI,EAAAA,sBAAP,CAA8BT,GAA9B,EAA4D;AAC1D,QAAI,CAAC,KAAKD,cAAL,CAAoBC,GAApB,CAAL,EAA+B,OAAQ,oBAAC,KAAD,CAAO,QAAP,QAAgB,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAC;AAAZ,MAAhB,CAAR;AAE/B,WACE,oBAAC,KAAD,CAAO,QAAP,QACE,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAC;AAAZ,OACE,oCAAS,KAAKM,SAAL,CAAeN,GAAf,CAAT,CADF,CADF,EAIG,KAAKQ,SAAL,CAAeR,GAAf,IAAsB,CAAtB,IAA2B,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAC;AAAZ,OAC1B,oCAAS,KAAKQ,SAAL,CAAeR,GAAf,CAAT,CAD0B,CAJ9B,MADF;AAUD;;AAESU,EAAAA,aAAV,CAAwBC,MAAxB,EAAgD;AAC9C,QAAIA,MAAM,CAACC,cAAP,CAAsB,MAAtB,KAAiCD,MAAM,CAACE,IAAP,KAAgB,IAAjD,IAAyDF,MAAM,CAACE,IAAP,KAAgB,EAA7E,EAAiF;AAC/E,aAAOjB,GAAG,CAACkB,QAAJ,CAAaH,MAAM,CAACE,IAApB,CAAP;AACD,KAFD,MAEO;AACL,aAAOF,MAAM,CAACI,QAAd;AACD;AACF;;AAvCyH","sourcesContent":["import * as React from 'react';\r\nimport { Permission, PaginatedResources, Client } from './resource-model';\r\nimport { Msg } from '../../widgets/Msg';\r\n\r\nexport interface ResourcesTableProps {\r\n  resources: PaginatedResources;\r\n}\r\n\r\nexport interface ResourcesTableState {\r\n  permissions: Map<number, Permission[]>;\r\n}\r\n\r\nexport abstract class AbstractResourcesTable<S extends ResourcesTableState> extends React.Component<ResourcesTableProps, S> {\r\n\r\n  protected hasPermissions(row: number): boolean {\r\n    return (this.state.permissions.has(row)) && (this.state.permissions.get(row)!.length > 0);\r\n  }\r\n\r\n  private firstUser(row: number): string {\r\n    if (!this.hasPermissions(row)) return 'ERROR!!!!'; // should never happen\r\n\r\n    return this.state.permissions.get(row)![0].username;\r\n  }\r\n\r\n  protected numOthers(row: number): number {\r\n    if (!this.hasPermissions(row)) return -1; // should never happen\r\n\r\n    return this.state.permissions.get(row)!.length - 1;\r\n  }\r\n\r\n  public sharedWithUsersMessage(row: number): React.ReactNode {\r\n    if (!this.hasPermissions(row)) return (<React.Fragment><Msg msgKey='resourceNotShared' /></React.Fragment>);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Msg msgKey='resourceSharedWith'>\r\n          <strong>{this.firstUser(row)}</strong>\r\n        </Msg>\r\n        {this.numOthers(row) > 0 && <Msg msgKey='and'>\r\n          <strong>{this.numOthers(row)}</strong>\r\n        </Msg>}.\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  protected getClientName(client: Client): string {\r\n    if (client.hasOwnProperty('name') && client.name !== null && client.name !== '') {\r\n      return Msg.localize(client.name!);\r\n    } else {\r\n      return client.clientId;\r\n    }\r\n  }\r\n}\r\n"],"file":"AbstractResourceTable.js"}